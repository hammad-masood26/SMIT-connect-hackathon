(()=>{var e={};e.id=225,e.ids=[225],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},3001:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>c});var r=t(7096),a=t(6132),l=t(7284),n=t.n(l),i=t(2564),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["user",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6242)),"C:\\Users\\HT\\Desktop\\Hackathon\\app\\user\\dashboard\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5345)),"C:\\Users\\HT\\Desktop\\Hackathon\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\HT\\Desktop\\Hackathon\\app\\user\\dashboard\\page.tsx"],x="/user/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/user/dashboard/page",pathname:"/user/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2156:(e,s,t)=>{Promise.resolve().then(t.bind(t,8306))},8306:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>UserDashboard});var r=t(784),a=t(9885),l=t(7114),n=t(92),i=t(517),d=t(7371),c=t(9546),o=t(345);let getUserAppointments=async e=>{try{let s=JSON.parse(localStorage.getItem("userAppointments")||"{}");return s[e]||[]}catch(e){return console.error("Error fetching appointments:",e),[]}},getUserHelpRequests=async e=>{try{let s=JSON.parse(localStorage.getItem("userHelpRequests")||"{}");return s[e]||[]}catch(e){return console.error("Error fetching help requests:",e),[]}};function UserDashboard(){let[e,s]=(0,a.useState)(null),[t,x]=(0,a.useState)(!0),m=(0,l.useRouter)(),[p,h]=(0,a.useState)([]),[g,u]=(0,a.useState)([]);(0,a.useEffect)(()=>{let loadUserData=async()=>{try{let e=localStorage.getItem("user");if(!e){m.push("/user/login");return}let t=JSON.parse(e);s(t);let r=JSON.parse(localStorage.getItem("userAppointments")||"{}"),a=r[t.id]||[],l=JSON.parse(localStorage.getItem("userHelpRequests")||"{}"),n=l[t.id]||[];h(a),u(n);try{let[e,s]=await Promise.all([getUserAppointments(t.id),getUserHelpRequests(t.id)]);h(e||[]),u(s||[]);let a={...r,[t.id]:e||[]},n={...l,[t.id]:s||[]};localStorage.setItem("userAppointments",JSON.stringify(a)),localStorage.setItem("userHelpRequests",JSON.stringify(n))}catch(e){console.error("Error fetching data:",e),o.default.error("Failed to load latest data")}}catch(e){console.error("Error loading user data:",e),m.push("/user/login")}finally{x(!1)}};loadUserData()},[m]);let handleNavigation=e=>{m.push(e)},parseDate=e=>e?e instanceof Date?e:new Date("string"==typeof e?e:e.seconds?1e3*e.seconds:0):new Date(0);if(t)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});if(!e)return null;let j=(()=>{let e=[...p.map(e=>({...e,type:"appointment"})),...g.map(e=>({...e,type:"help-request"}))];return e.map(e=>({...e,parsedDate:parseDate(e.createdAt)})).sort((e,s)=>s.parsedDate.getTime()-e.parsedDate.getTime()).slice(0,4)})();return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(n.Z,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",e.name]})]})]}),(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem("user"),o.default.success("Logged out successfully"),m.push("/")},className:"flex items-center space-x-2 text-gray-600 hover:text-red-600 transition-colors duration-200",children:[r.jsx(n.Z,{className:"h-5 w-5"}),r.jsx("span",{children:"Logout"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>handleNavigation("/user/appointment"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx(i.Z,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Book Appointment"}),r.jsx("p",{className:"text-gray-600",children:"Schedule a new appointment"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>handleNavigation("/user/help-request"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(d.Z,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Request Help"}),r.jsx("p",{className:"text-gray-600",children:"Submit a help request"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>handleNavigation("/user/my-requests"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx(c.Z,{className:"h-6 w-6 text-orange-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Requests"}),r.jsx("p",{className:"text-gray-600",children:"View your appointments & requests"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>handleNavigation("/user/profile"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx(n.Z,{className:"h-6 w-6 text-purple-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Profile"}),r.jsx("p",{className:"text-gray-600",children:"Manage your account details"})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(i.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"Recent Activity"]}),r.jsx("div",{className:"space-y-4",children:j.length>0?j.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${"appointment"===e.type?"bg-green-100":"bg-blue-100"}`,children:"appointment"===e.type?r.jsx(i.Z,{className:"h-4 w-4 text-green-600"}):r.jsx(d.Z,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"appointment"===e.type?e.reason||"Appointment":`${e.type||"Help"} Assistance`}),r.jsx("p",{className:"text-sm text-gray-600",children:"appointment"===e.type&&e.preferredDate?`Scheduled for ${e.preferredDate}`:`Submitted on ${e.parsedDate.toLocaleDateString()}`})]})]}),r.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${"approved"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.status||"pending"})]},`${e.type}-${e.id}`)):(0,r.jsxs)("div",{className:"text-gray-500 text-center py-8",children:[r.jsx(c.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"No recent activity found."}),r.jsx("p",{className:"text-sm mt-2",children:"Your appointments and help requests will appear here."})]})})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(c.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"Quick Stats"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.length+g.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Requests"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:[...p,...g].filter(e=>"approved"===e.status).length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:[...p,...g].filter(e=>"pending"===e.status).length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-gray-600",children:[...p,...g].filter(e=>"rejected"===e.status).length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Rejected"})]})]}),!1]})]})]}),r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 md:hidden",children:(0,r.jsxs)("div",{className:"flex justify-around items-center",children:[(0,r.jsxs)("button",{onClick:()=>handleNavigation("/user/dashboard"),className:"flex flex-col items-center space-y-1 py-2 px-3 rounded-lg bg-green-100 text-green-600",children:[r.jsx(i.Z,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xs font-medium",children:"Home"})]}),(0,r.jsxs)("button",{onClick:()=>handleNavigation("/user/appointment"),className:"flex flex-col items-center space-y-1 py-2 px-3 rounded-lg text-gray-600 hover:text-green-600 hover:bg-green-50",children:[r.jsx(i.Z,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xs font-medium",children:"Appointment"})]}),(0,r.jsxs)("button",{onClick:()=>handleNavigation("/user/help-request"),className:"flex flex-col items-center space-y-1 py-2 px-3 rounded-lg text-gray-600 hover:text-green-600 hover:bg-green-50",children:[r.jsx(d.Z,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xs font-medium",children:"Help"})]}),(0,r.jsxs)("button",{onClick:()=>handleNavigation("/user/my-requests"),className:"flex flex-col items-center space-y-1 py-2 px-3 rounded-lg text-gray-600 hover:text-green-600 hover:bg-green-50",children:[r.jsx(c.Z,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xs font-medium",children:"Requests"})]}),(0,r.jsxs)("button",{onClick:()=>handleNavigation("/user/profile"),className:"flex flex-col items-center space-y-1 py-2 px-3 rounded-lg text-gray-600 hover:text-green-600 hover:bg-green-50",children:[r.jsx(n.Z,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xs font-medium",children:"Profile"})]})]})})]})}},6242:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>d});var r=t(5153);let a=(0,r.createProxy)(String.raw`C:\Users\HT\Desktop\Hackathon\app\user\dashboard\page.tsx`),{__esModule:l,$$typeof:n}=a,i=a.default,d=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[653,607,170,38],()=>__webpack_exec__(3001));module.exports=t})();